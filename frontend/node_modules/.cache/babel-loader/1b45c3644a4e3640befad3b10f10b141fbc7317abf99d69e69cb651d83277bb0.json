{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nicol\\\\Documents\\\\101462077_comp3123_assignment2_reactjs\\\\frontend\\\\src\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { login, signup } from './api';\nimport { Navigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [auth, setAuth] = useState({\n    accessToken: localStorage.getItem('accessToken') || '',\n    error: ''\n  });\n  useEffect(() => {\n    if (auth.accessToken) localStorage.setItem('accessToken', auth.accessToken);else localStorage.removeItem('accessToken');\n  }, [auth.accessToken]);\n\n  // Signup \n  const handleSignup = async (email, username, password) => {\n    try {\n      const {\n        data\n      } = await signup({\n        email,\n        username,\n        password\n      });\n      localStorage.setItem('accessToken', data.accessToken);\n      setAuth({\n        accessToken: data.accessToken,\n        error: ''\n      });\n    } catch (e) {\n      console.log(\"Frontend Signup failure: \", e.message);\n      setAuth({\n        accessToken: null,\n        error: e\n      });\n    }\n  };\n\n  // Login \n  const handleLogin = async (username, password) => {\n    try {\n      const {\n        data\n      } = await login({\n        username,\n        password\n      });\n      localStorage.setItem('accessToken', data.accessToken);\n      setAuth({\n        accessToken: data.accessToken,\n        error: ''\n      });\n    } catch (e) {\n      console.log(\"Frontend Login failure: \", e);\n      setAuth({\n        accessToken: null,\n        error: e\n      });\n    }\n  };\n\n  // Logout\n  const handleLogout = async () => {\n    try {\n      localStorage.removeItem('accessToken');\n      setAuth({\n        accessToken: null,\n        error: ''\n      });\n    } catch (e) {\n      console.log(\"Frontend Logout failure: \", e);\n      setAuth({\n        accessToken: localStorage.getItem('accessToken'),\n        error: e\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      auth,\n      handleLogin,\n      handleLogout,\n      handleSignup\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthProvider, \"yOanMK9KFi25kR7xMnjkr4+16hA=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","login","signup","Navigate","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","auth","setAuth","accessToken","localStorage","getItem","error","setItem","removeItem","handleSignup","email","username","password","data","e","console","log","message","handleLogin","handleLogout","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/Users/nicol/Documents/101462077_comp3123_assignment2_reactjs/frontend/src/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { login, signup } from './api';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    \r\n    const [ auth, setAuth ] = useState({\r\n        accessToken: (localStorage.getItem('accessToken') || ''),\r\n        error: ''\r\n    })\r\n\r\n    useEffect(() => {\r\n        if( auth.accessToken )\r\n            localStorage.setItem('accessToken', auth.accessToken)\r\n        else \r\n            localStorage.removeItem('accessToken')\r\n        \r\n    }, [auth.accessToken])\r\n\r\n\r\n\r\n    // Signup \r\n    const handleSignup = async (email, username, password) => {\r\n        try {\r\n            const { data } = await signup({email, username, password})\r\n\r\n            localStorage.setItem('accessToken', data.accessToken)\r\n            setAuth({\r\n                accessToken: data.accessToken,\r\n                error: ''\r\n            })\r\n\r\n        } catch (e) {\r\n            console.log(\"Frontend Signup failure: \", e.message)\r\n            setAuth({\r\n                accessToken: null,\r\n                error: e\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    // Login \r\n    const handleLogin = async (username, password) => {\r\n        try {\r\n            const { data } = await login({ username, password })\r\n\r\n            localStorage.setItem('accessToken', data.accessToken)\r\n            setAuth({\r\n                accessToken: data.accessToken,\r\n                error: ''\r\n            })\r\n\r\n        } catch (e) {\r\n            console.log(\"Frontend Login failure: \", e)\r\n            setAuth({\r\n                accessToken: null,\r\n                error: e\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    // Logout\r\n    const handleLogout = async () => {\r\n        try {            \r\n            localStorage.removeItem('accessToken')\r\n            setAuth({\r\n                accessToken: null,\r\n                error: ''\r\n            })\r\n\r\n        } catch (e) {\r\n            console.log(\"Frontend Logout failure: \", e)\r\n            setAuth({\r\n                accessToken: localStorage.getItem('accessToken'),\r\n                error: e\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            auth,\r\n            handleLogin,\r\n            handleLogout,\r\n            handleSignup\r\n        }}>\r\n            { children }\r\n        </AuthContext.Provider>\r\n    )\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}